#sqlite #kotlin #android

[[_ Rusz Głową Android. Programowanie aplikacji]]

>[!tip] SQLite w Androidzie
> Android trwale przechowuje dane, używając baz danych SQLite
> - baza danych SQLite jest zwyczajnym plikiem.
> - Jest zoptymalizowana pod kątem wykorzystania przez jednego użytkownika.
> - Jest stabilna i szybka.

## Gdzie jest przechowywana baza danych?
###### `/data/data/nazwa_pakietu_aplikacji/databases/nazwa_bazy_danych.db`

W katalogu aplikacji może być przechowywanych kilka baz danych. Każda baza składa się z:
- **pliku baz danych**:
	- jego nazwa to nazwa bazy,
	- to główny plik bazy danych, 
	- w nim przechowywane są wszystkie dane
- **plik magazynu** (*journal file*) :
	- jego nazwa to nazwa bazy danych z końcówką `-journal`
	- zawiera wszelkie zmiany wprowadzane w bazie danych
	- jeżeli wprowadzanie zmian napotka problemy, to Android skorzysta z informacji zapisanych w tym pliku, by odtworzyć ostatnio wprowadzone zmian


## Androidowe klasy związane z SQLite

>[!success] Pomocnik SQLite
> Umożliwia 
> > tworzenie baz danych 
> > zarządzanie nimi
>  Pomocnika tworzymy poprzez rozszerzenie klasy `SQLiteOpenHelper`

>[!success] baza danych SQLite
>Obiekt klasy `SQLiteDatabase` zapewnia dostęp do bazy danych.
>To obiekt *connection*.

>[!success] Kursor
>Obiekt klasy `Cursor` służy do:
>> odczytywania informacji z bazy danych
>> zapisywania informacji w bazie danych


>[!danger] ważne
>Bazy danych nie są przechowywane w tym samym katalogu, w którym jest umieszczony kod aplikacji. Dzięki temu można zainstalować nową wersję aplikacji, a informacje przechowywane w bazie będą bezpieczne


---------
# Zmiana aplikacji Coffein
[[7. Widoki list i adaptery]]

## pomocnik SQL-ite
będzie służył do:
- utworzenie bazy danych 
- utworzenie tabeli `Drink` i zapisanie w niej informacji o napojach.
czyli zastępujemy klasę `Drink` bazą danych
 
Klasa `SQLiteHelper` pomaga w tworzeniu i utrzymani baz danych SQLite:
- tworzenie baz danych
- zapewnianie dostępu do baz danych
- utrzymywanie bazy danych w doskonałym stanie (zmiana starej struktury bazy danych w nowiutką strukturę)


## tworzenie pomocnika
1. utwórz klasę dziedziczącą po `SQLiteOpenHelper`
	1. przesłoń metodę `onCreate()`
		1. jest wywoływana w momencie, gdy baza danych zostaje po raz pierwszy utworzona na urządzeniu
		2. powinna zawierać cały kod niezbędny do utworzenia tabeli bazy danych,
	2. przesłoń metodę `onUpdate()`
		1. jest wywoływana, gdy trzeba zaktualizować bazę danych
			1. np. zmiany w tabelach już po utworzeniu bazy danych.
2. w




















